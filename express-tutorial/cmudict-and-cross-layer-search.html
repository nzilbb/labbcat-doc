<!DOCTYPE html>
<html>
  <head>
    <title>4 - The CMU Dictionary and Cross Layer Searching</title>
    <base href="./">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="wysiwiki/wysiwiki.css" type="text/css" />
    <link rel="stylesheet" href="style.css" type="text/css" />    
    <link rel="shortcut icon" href="favicon.ico" />    
    <script src="wysiwiki/wysiwiki.js"></script>
  </head>
  <body>
    <header><a rel='author' href='https://www.canterbury.ac.nz/nzilbb/'><img src='nzilbb.svg' alt='Te KƒÅhui Roro Reo | The New Zealand Institute of Language, Brain and Behaviour' title='üÑØ NZILBB'></a></header>
    <div id="main">
      <aside></aside>
      <article>
<h2>4 - The CMU Dictionary and Cross Layer Searching</h2>
 <p>LaBB-CAT can be integrated with the CMU Pronouncing Dictionary, which is a free pronounciation dictionary of English maintained by the Speech Group in the School of Computer Science at Carnegie Mellon University. The pronunciations are based on American English, so are suitable for American English recordings.</p>
 <p>It can also serve as a free alternative to the CELEX lexicon (which is based on British English), for those that have not purchased CELEX, although is less ideal for ‚Äònon-rhotic‚Äô varieties of English.</p>
 <p>In this exercise you will:</p>
 <ol>
  <li>install the CMU Pronouncing Dictionary layer manager,</li>
  <li>use it to create new annotations for word pronunciations, and&nbsp;</li>
  <li>incorporate the new layers in more sophisticated searches.</li></ol>
<hr>
 <p>The first thing we're going to to is install the CMU Pronouncing Dictionary layer manager‚Ä¶</p>
 <ol>
  <li>Click the <i>layer managers</i> menu option.
  <br>You will see a list of pre-installed layer managers, which are modules that perform automatic annotation tasks. The CMU Pronouncing Dictionary layer manager isn't pre-installed, because it is language-specific.</li>
  <li>Click the <i>List of layer managers that are not yet installed</i> link near the bottom.</li>
  <li>Find <i>CMU Pronouncing Dictionary</i> in the list, and click its <i>Install</i> button</li>
  <li>Click <i>Install</i> on the resulting information page.
  <br>This displays some further information about the layer manager, allowing you to upload an alternative version of the dictionary file.&nbsp;
  <br>We be using the standard file that is included with the layer manager.</li>
  <li>Click <i>Configure.</i>
  <br>You will see a progress bar while the layer manager loads the data from the dictionary file into the LaBB-CAT database. This will take a minute or so.</li>
  <li>Once it's finished, you will see a new window open with information about the CMU Pronouncing Dictionary layer manager.
  <br>&nbsp;
  <br>Now that we've installed the layer manager, we'll create a layer that contains word pronunciations. Follow the instructions on the information page to create a layer for word pronuncation, i.e.:
  <br>&nbsp;</li>
  <li>Click on the <i>word layers</i> option on the menu.
  <br>You will see a list of existing word layers, including the <i>orthography</i> layer, the <i>lexical</i> layer, etc.</li>
  <li>The column headings are also a form for defining a new word layer. Fill in the following details in this form:
 <ul>
  <li><strong>Layer ID:</strong> <code>phonemes</code></li>
  <li><strong>Type:</strong> <i>Phonological</i></li>
  <li><strong>Alignment:</strong> <i>None</i></li>
  <li><strong>Manager:</strong> <i>CMU Pronouncing Dictionary</i></li>
  <li><strong>Description:</strong> All possible phonemic transcriptions for each word.</li></ul></li>
  <li>Click <i>New</i> to add the layer.
  <br>You will see the layer configuration form.</li>
  <li>Set the <strong>Encoding</strong> field to <i>CELEX DISC</i>, and the default values for everything else.
  <br><img src="./help-3.png"> If you're curious about what the configuration options do, hover your mouse over each one to see further information about what the setting does.</li>
  <li>Click <i>Set Parameters</i>.
  <br>You will see a message asking you if you want (re)generate the layer data now.</li>
  <li>Click <i>Regenerate</i>.
  <br>You will see a progress bar moving across the page while the annotations are being generated. When it is finished, you will see a message saying <i>Layer complete</i>.</li>
  <li>Once the layer has finished generating, click the transcripts menu option, and open the first transcript in the list.</li>
  <li>Tick your new <i>phonemes</i> layer.
  <br>You will see that each word is tagged with a phonemic transcription. You will notice that the annotations are displayed using IPA symbols. However, the layer manager doesn't use IPA symbols directly, it actually uses the ‚ÄòDISC‚Äô encoding for phonemes, which uses ordinary ‚Äòtypewriter‚Äô characters (ASCII), and uses exactly one character per phoneme.
  <br>The IPA symbols are being displayed by LaBB-CAT to provide a linguist-friendly representation of the phonemic transcription. But you can see the underlying DISC characters by selecting the <i>ASCII</i> option on the layer in the transcript.</li>
  <li>Select <i>ASCII</i> on the phonemes layer, to see what the layer manager is actually producing.
  <br>You may find that this is somewhat harder to read. It's similar to the ‚ÄòSAMPA‚Äô system for encoding phonemes, but diphthongs are generally represented by digits, and various other characters are used to represent affricates, etc.&nbsp;</li>
  <li><i>IPA</i> on the phonemes layer, to return to the IPA view of the layer.
  <br>
  <br>It's nice to display the IPA symbols, but it's important to understand the DISC symbols (shown in the table below), because they are what we have to use when searching on the phonemes layer, which we are going to try now.
  <br>&nbsp;
  <br>As you may have seen on the layer configuration page, there is another possible representation of the pronunciations, called ARPABET; this is what is used in the original dictionary file published by CMU, and uses up to three uppercase characters per phoneme. &nbsp;While we're not using ARPABET in this exercise, you can use it if you like, and the ARPABET symbols are included in the table. &nbsp;In the table, you will see that there are gaps where no ARPABET version of the phoneme is shown; this means that the CMU Pronouncing Dictionary contains no entries that include that phoneme. &nbsp;
  <br>
  <br>&nbsp;</li></ol>
 <figure class="table"><table><tbody>
 <tr><td>IPA</td><td>DISC</td><td>ARPABET</td><td>&nbsp;</td><td>&nbsp;</td><td>IPA</td><td>DISC</td><td>ARPABET</td><td>&nbsp;</td></tr>
 <tr><td>p</td><td>p</td><td>P</td><td><strong>p</strong>at</td><td>&nbsp;</td><td>…™</td><td>I</td><td>IH</td><td>K<strong>I</strong>T</td></tr>
 <tr><td>b</td><td>b</td><td>B</td><td><strong>b</strong>ad</td><td>&nbsp;</td><td>Œµ</td><td>E</td><td>EH</td><td>DR<strong>E</strong>SS</td></tr>
 <tr><td>t</td><td>t</td><td>T</td><td><strong>t</strong>ack</td><td>&nbsp;</td><td>√¶</td><td>{</td><td>AE</td><td>TR<strong>A</strong>P</td></tr>
 <tr><td>d</td><td>d</td><td>D</td><td><strong>d</strong>ad</td><td>&nbsp;</td><td> å</td><td>V</td><td>AH</td><td>STR<strong>U</strong>T</td></tr>
 <tr><td>k</td><td>k</td><td>K</td><td><strong>c</strong>ad</td><td>&nbsp;</td><td>…í</td><td>Q</td><td>AH</td><td>L<strong>O</strong>T</td></tr>
 <tr><td>g</td><td>g</td><td>G</td><td><strong>g</strong>ame</td><td>&nbsp;</td><td> ä</td><td>U</td><td>UH</td><td>F<strong>OO</strong>T</td></tr>
 <tr><td>≈ã</td><td>N</td><td>NG</td><td>ba<strong>ng</strong></td><td>&nbsp;</td><td>…ô</td><td>@</td><td>[vowel ending in 0]</td><td><strong>a</strong>nother</td></tr>
 <tr><td>m</td><td>m</td><td>M</td><td><strong>m</strong>at</td><td>&nbsp;</td><td>i:</td><td>i</td><td>IY</td><td>FL<strong>EE</strong>CE</td></tr>
 <tr><td>n</td><td>n</td><td>N</td><td><strong>n</strong>at</td><td>&nbsp;</td><td>Œ±:&nbsp;</td><td>#</td><td>AA</td><td>f<strong>a</strong>ther</td></tr>
 <tr><td>l</td><td>l</td><td>L</td><td><strong>l</strong>ad</td><td>&nbsp;</td><td>…î:</td><td>$</td><td>AO</td><td>TH<strong>OU</strong>GHT</td></tr>
 <tr><td>r</td><td>r</td><td>R</td><td><strong>r</strong>at</td><td>&nbsp;</td><td>u:</td><td>u</td><td>UW</td><td>G<strong>OO</strong>SE</td></tr>
 <tr><td>f</td><td>f</td><td>F</td><td><strong>f</strong>at</td><td>&nbsp;</td><td>…ú:</td><td>3</td><td>ER</td><td>N<strong>UR</strong>SE</td></tr>
 <tr><td>v</td><td>v</td><td>V</td><td><strong>v</strong>at</td><td>&nbsp;</td><td>e…™</td><td>1</td><td>EY</td><td>F<strong>A</strong>CE</td></tr>
 <tr><td>Œ∏</td><td>T</td><td>TH</td><td><strong>th</strong>in</td><td>&nbsp;</td><td>Œ±…™</td><td>2</td><td>AY</td><td>PR<strong>I</strong>CE</td></tr>
 <tr><td>√∞</td><td>D</td><td>DH</td><td><strong>th</strong>en</td><td>&nbsp;</td><td>…î…™</td><td>4</td><td>OY</td><td>CH<strong>OI</strong>CE</td></tr>
 <tr><td>s</td><td>s</td><td>S</td><td><strong>s</strong>ap</td><td>&nbsp;</td><td>…ô ä</td><td>5</td><td>OW</td><td>G<strong>OA</strong>T</td></tr>
 <tr><td>z</td><td>z</td><td>Z</td><td><strong>z</strong>ap</td><td>&nbsp;</td><td>Œ± ä</td><td>6</td><td>AW</td><td>M<strong>OU</strong>TH</td></tr>
 <tr><td>&nbsp;‚à´</td><td>S</td><td>SH</td><td><strong>sh</strong>eep</td><td>&nbsp;</td><td>…™…ô</td><td>7</td><td>&nbsp;</td><td>N<strong>EAR</strong></td></tr>
 <tr><td> í</td><td>Z</td><td>ZH</td><td>mea<strong>s</strong>ure</td><td>&nbsp;</td><td>Œµ…ô</td><td>8</td><td>&nbsp;</td><td>SQU<strong>ARE</strong></td></tr>
 <tr><td>j</td><td>j</td><td>Y</td><td><strong>y</strong>ank</td><td>&nbsp;</td><td> ä…ô</td><td>9</td><td>&nbsp;</td><td>C<strong>URE</strong></td></tr>
 <tr><td>x</td><td>x</td><td>&nbsp;</td><td>lo<strong>ch</strong></td><td>&nbsp;</td><td>√¶</td><td>c</td><td>&nbsp;</td><td>t<strong>i</strong>mbre</td></tr>
 <tr><td>h</td><td>h</td><td>HH</td><td><strong>h</strong>ad</td><td>&nbsp;</td><td>…ëÃÉÀê</td><td>q</td><td>&nbsp;</td><td>d√©t<strong>en</strong>te</td></tr>
 <tr><td>w</td><td>w</td><td>W</td><td><strong>w</strong>et</td><td>&nbsp;</td><td>√¶ÃÉÀê</td><td>0</td><td>&nbsp;</td><td>l<strong>in</strong>gerie</td></tr>
 <tr><td> ß</td><td>J</td><td>CH</td><td><strong>ch</strong>eap</td><td>&nbsp;</td><td>…íÃÉÀê</td><td>~</td><td>&nbsp;</td><td>bouill<strong>on</strong></td></tr>
 <tr><td> §</td><td>_</td><td>JH</td><td><strong>j</strong>eep</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
 <tr><td>≈ãÃ©</td><td>C</td><td>&nbsp;</td><td>bac<strong>on</strong></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
 <tr><td>mÃ©</td><td>F</td><td>&nbsp;</td><td>idealis<strong>m</strong></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
 <tr><td>nÃ©</td><td>H</td><td>&nbsp;</td><td>burd<strong>en</strong></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
 <tr><td>lÃ©</td><td>P</td><td>&nbsp;</td><td>&nbsp;dang<strong>le</strong></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure>
 <ol>
  <li>Select the <i>search</i> option on the menu, which allows you to search all participants by default.</li>
  <li>If it's not already ticked, tick the new <i>phonemes</i> layer.
  <br>Now you will see that our search matrix is two layers high by one word wide.
  <br><img src="./two-layers-high.png" alt="The search matrix shows a frame labelled 'orthography' above and a frame labelled 'phonemes' below, both with a 'matches' dropdown box and an empty 'regular expression' box. The 'phonemes' frame also includes a small button labelled: ¬´"></li>
  <li>Search your new <i>phonemes</i> layer for words that start with <code>h</code> by entering the appropriate regular expression in the <i>phonemes</i> box.
  <br>You will see that the results contain words that you might not expect, like ‚Äúwhere‚Äù, ‚Äúwhich‚Äù and ‚Äúwhen‚Äù.</li>
  <li>Click one of these unexpected results, to open the transcript.
  <br>You will see that, in the transcript, the pronunciation appears to start with /w/, not with /h/.</li>
  <li>Click on the word and select the bottom <i>Edit</i> option on the menu that appears.
  <br>This opens a small window that displays all annotations on that word token.
  <br>Now look for the <i>phonemes</i> layer. You will see that, in addition to the pronunciation that starts with /w/, there's another annotation that starts with /h/, which is invisible on the transcript.
  <br>These are all the possible phonemic transcriptions for the word, ordered most-frequent first. Only the first one is displayed in the transcript, but when you do searches, all of them are searched. This can result in unexpected matches like this, but it can be useful, as it ensures that when you search for a particular phonemic pattern, all possible tokens are returned, not just those that match on the most ‚Äònormal‚Äô transcription.
  <br>
  <br>Now that we have phonemic transcripts, we can do a better job of the search we tried in the earlier exercise - ‚Äúthe‚Äù followed by a word starting with a vowel‚Ä¶</li>
  <li>Go to the <i>search</i> page.</li>
  <li>Create a search matrix that's two words wide, and includes the <i>orthography</i> and <i>phonemes</i> layers.</li>
  <li>Type <code>the</code> in the first <i>orthography</i> box.</li>
  <li>Click the second box on the <i>phonemes</i> layer, but don't enter anything in the box yet.
  <br>The box has a little symbol <code>¬´</code> to the right of it.</li>
  <li>Hover the mouse over it to see what it says, and then click it.
  <br>You will see that a section opens with a bunch of phoneme symbols on it; clicking on a phoneme adds its DISC representation to the search box.&nbsp;</li>
  <li>You could use the square-brackets <code>[</code> at the start of your pattern, and click all vowel symbols to add all possible vowels - Note that the vowels in the DISC representation extend beyond a, e, i, o, and u - you should add in all the vowels you see in the list that appears when you expand the IPA helper, including all the diphthongs.
  <br><i>Alternatively</i>, you can simply click the <i>VOWEL</i> link in the ‚Äòphoneme symbol selector‚Äô, which will add all the DISC vowels for you, already enclosed in square-brackets.</li>
  <li>Be sure to append the ‚Äòany vowel‚Äô regular expression with <code>.*</code> to ensure the search matches words that have phonemes after the initial vowel</li>
  <li>Run the search and check that it's giving you what you expect. Notice that now there are no ‚Äòfalse positives‚Äô like ‚Äúthe one‚Äù that we were getting when searching by orthography alone.</li></ol>
 <p>Now that you've generated an annotation layer, and have seen how the search matrix works, you might want to try out some of the following searches, or invent some others:</p>
 <ul>
  <li>Words which have the DRESS vowel as the second phoneme</li>
  <li>Words ending with a front vowel, followed by words beginning with /p/ or /b/</li>
  <li>Words that begin with ‚Äúk‚Äù in their spelling, but begin with the phoneme /n/</li>
  <li>Words that begin with ‚Äúk‚Äù in their spelling, but <i>do not</i> begin with the phoneme /n/</li></ul></article>
      <nav>
        <iframe src="index.html" id="nav" name="nav"></iframe>
      </nav>
    </div>
    <footer><a rel='license' href='http://creativecommons.org/licenses/by-sa/2.0/'><img alt='CC-BY-SA Creative Commons Licence ' src='cc-by-sa.svg' title='This work is licensed under a Creative Commons Attribution-ShareAlike 2.0 Generic License' /></a></footer>
  </body>
</html>
